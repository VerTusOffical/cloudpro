# Решение проблем с CloudPRO

Если вы столкнулись с проблемами при работе с CloudPRO, вот некоторые шаги по отладке и исправлению:

## Ошибка 500 при первом запуске

Если вы получаете ошибку 500 при первом запуске, проверьте следующее:

1. **Проверьте логи ошибок PHP и Nginx**
   ```
   sudo tail -n 100 /var/log/nginx/error.log
   sudo tail -n 100 /var/log/php*-fpm.log
   ```

2. **Проверьте подключение к базе данных**
   ```
   mysql -u cloudpro_user -p
   ```
   После ввода пароля, выполните:
   ```sql
   USE cloudpro;
   SHOW TABLES;
   ```
   Должны быть следующие таблицы: `users`, `websites`, `db_list`, `api_keys`.

3. **Проверьте файл конфигурации**
   ```
   sudo cat /usr/local/CloudPRO/config/config.php
   ```
   Убедитесь, что параметры подключения к базе данных правильные.

## Восстановление панели

Если у вас возникли проблемы, вы можете использовать встроенные функции восстановления:

```bash
sudo ./install.sh repair
```

Эта команда проверит:
- Наличие установленной панели
- Подключение к базе данных
- Структуру базы данных и создаст недостающие таблицы
- Наличие пользователя admin
- Права доступа к файлам и директориям
- Конфигурацию Nginx

## Отображение ошибок PHP

Для отладки проблем вы можете временно включить отображение ошибок PHP:

1. Откройте файл `bootstrap.php`:
   ```
   sudo nano /usr/local/CloudPRO/bootstrap.php
   ```

2. В начале файла добавьте:
   ```php
   // Настройка отображения ошибок для отладки
   ini_set('display_errors', 1);
   ini_set('display_startup_errors', 1);
   error_reporting(E_ALL);
   ```

3. Сохраните файл и обновите страницу в браузере.

## Проверка таблиц в базе данных

Если вы подозреваете проблемы с базой данных, вы можете проверить наличие всех необходимых таблиц:

```sql
USE cloudpro;
SHOW TABLES;
SELECT * FROM users;
```

## Удаление панели и чистая установка

Если вы хотите начать с чистого листа:

```bash
sudo ./install.sh remove
```

После подтверждения панель будет удалена. Затем вы можете установить её заново:

```bash
sudo ./install.sh
``` 